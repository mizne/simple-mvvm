!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MVVM=e():t.MVVM=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";var o=n(1),i=function(){function t(t,e,n){this.vm=t,this.expOrFn=e,this.cb=n,this.deps={},this.getter="function"==typeof e?e:this.parseGetter(e),this.value=this.get()}return t.prototype.update=function(){var t=this.value,e=this.get();e!==t&&(this.value=e,this.cb.call(this.vm,e,t))},t.prototype.addDep=function(t){this.deps.hasOwnProperty(t.id)||(t.addWatcher(this),this.deps[t.id]=t)},t.prototype.get=function(){o.a.target=this;var t=this.getter.call(this.vm,this.vm);return o.a.target=null,t},t.prototype.parseGetter=function(t){if(!/[^\w.$]/.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n+=1){if(!t)return;t=t[e[n]]}return t}}},t}();e.a=i},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return r});var o=function(){function t(t){this.data=t,this.observer(t)}return t.prototype.observer=function(t,e){var n=this;void 0===e&&(e=[]),t&&"object"==typeof t&&Object.keys(t).forEach(function(o){n.defineReactive(t,o,t[o],e)})},t.prototype.defineReactive=function(e,n,o,i){var c,s=i.concat(n);this.observer(o,s),Object.defineProperty(e,n,{enumerable:!0,configurable:!1,get:function(){return r.target&&(c=c||new r,r.target.addDep(c)),o},set:function(e){console.log("watch value change; "+o+" => "+e),console.log("change paths: "+s.join(" => ")),o=e,new t(e),c&&c.notify()}})},t}(),i=0,r=function(){function t(){this.id=i++,console.log(i),this.watchers=[]}return t.prototype.addWatcher=function(t){this.watchers.push(t)},t.prototype.removeWatcher=function(t){var e=this.watchers.indexOf(t);-1!==e&&this.watchers.splice(e,1)},t.prototype.notify=function(){this.watchers.forEach(function(t){t.update()})},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3);n.d(e,"MVVM",function(){return o.a});new o.a({el:"body",data:{greet:"hello",showText:!0,test:{a:{b:{c:"11"}}}},methods:{toggleShow:function(){this.showText=!this.showText}}})},function(t,e,n){"use strict";var o=n(0),i=n(1),r=n(4),c=function(){function t(t){var e=this;this.$options=t||{};var n=this._data=this.$options.data;Object.keys(n).forEach(function(t){e._proxyData(t)}),new i.b(n),this.$compile=new r.a(t.el||document.body,this)}return t.prototype.$watch=function(t,e,n){new o.a(this,t,e)},t.prototype._proxyData=function(t){var e=this;Object.defineProperty(this,t,{enumerable:!0,configurable:!1,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})},t}();e.a=c},function(t,e,n){"use strict";var o=n(0),i=function(){function t(t,e){this.$vm=e,this.$el="string"==typeof t?document.querySelector(t):t,this.$el&&(this.$fragment=this.node2Fragment(this.$el),this.init(),this.$el.appendChild(this.$fragment))}return t.prototype.node2Fragment=function(t){for(var e,n=document.createDocumentFragment();e=t.firstChild;)n.appendChild(e);return n},t.prototype.init=function(){this.compileNode(this.$fragment)},t.prototype.compileNode=function(t){var e=this,n=t.childNodes,o=/\{\{(.*)\}\}/;Array.from(n).forEach(function(t){e.isElement(t)?e.compileElement(t):e.isTextNode(t)&&o.test(t.textContent)&&e.compileText(t,RegExp.$1),t.childNodes&&t.childNodes.length&&e.compileNode(t)})},t.prototype.compileElement=function(t){var e=this,n=t.attributes;Array.from(n).forEach(function(n){var o=n.name;if(e.isDirective(o)){var i=n.value,r=o.substring(2);e.isEventDirective(r)?c.eventHandler(t,e.$vm,i,r):c[r+"Dir"]&&c[r+"Dir"](t,e.$vm,i),t.removeAttribute(o)}})},t.prototype.isElement=function(t){return 1===t.nodeType},t.prototype.isTextNode=function(t){return 3===t.nodeType},t.prototype.isDirective=function(t){return 0===t.indexOf("v-")},t.prototype.isEventDirective=function(t){return 0===t.indexOf("on")},t.prototype.compileText=function(t,e){c.textDir(t,this.$vm,e)},t}();e.a=i;var r={textUpdater:function(t,e){t.textContent=void 0===e?"":e},ifUpdater:function(t,e){t.style.display=e?"block":"none"}},c={textDir:function(t,e,n){c.bind(t,e,n,"text")},ifDir:function(t,e,n){c.bind(t,e,n,"if")},bind:function(t,e,n,i){var s=r[i+"Updater"];s&&s(t,c.getVmVal(e,n)),new o.a(e,n,function(e,n){s&&s(t,e,n)})},eventHandler:function(t,e,n,o){var i=o.split(":")[1],r=e.$options.methods&&e.$options.methods[n];i&&r&&t.addEventListener(i,r.bind(e),!1)},getVmVal:function(t,e){var n=t;return e.split(".").forEach(function(t){n=n[t]}),n}}}])});
//# sourceMappingURL=mvvm.js.map